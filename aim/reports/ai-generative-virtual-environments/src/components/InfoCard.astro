---
/**
 * InfoCard.astro
 * Highlighted info box for callouts, tips, and warnings
 */

interface Props {
  type?: 'info' | 'warning' | 'tip' | 'note' | 'danger';
  title?: string;
}

const { type = 'info', title } = Astro.props;

const icons: Record<string, string> = {
  info: `<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="2"/><path d="M10 9v4M10 7h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>`,
  warning: `<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M10 2L1 18h18L10 2z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/><path d="M10 8v4M10 14h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>`,
  tip: `<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M10 2a6 6 0 00-2 11.66V16h4v-2.34A6 6 0 0010 2z" stroke="currentColor" stroke-width="2"/><path d="M8 18h4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>`,
  note: `<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M4 3h12a1 1 0 011 1v12a1 1 0 01-1 1H4a1 1 0 01-1-1V4a1 1 0 011-1z" stroke="currentColor" stroke-width="2"/><path d="M7 7h6M7 10h6M7 13h4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>`,
  danger: `<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="2"/><path d="M7 7l6 6M13 7l-6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>`
};

const defaultTitles: Record<string, string> = {
  info: 'Information',
  warning: 'Warning',
  tip: 'Tip',
  note: 'Note',
  danger: 'Danger'
};

const displayTitle = title || defaultTitles[type];
---

<aside class:list={['info-card', `info-card--${type}`]} role="note">
  <div class="info-card__header">
    <span class="info-card__icon" aria-hidden="true" set:html={icons[type]} />
    <span class="info-card__title">{displayTitle}</span>
  </div>
  <div class="info-card__content">
    <slot />
  </div>
</aside>

<style>
  .info-card {
    border-radius: var(--radius-lg);
    padding: var(--space-4);
    margin: var(--space-4) 0;
  }

  .info-card__header {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    margin-bottom: var(--space-2);
  }

  .info-card__icon {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .info-card__title {
    font-weight: 600;
    font-size: var(--font-size-sm);
    text-transform: uppercase;
    letter-spacing: 0.025em;
  }

  .info-card__content {
    font-size: var(--font-size-sm);
    line-height: var(--line-height-relaxed);
  }

  .info-card__content :global(p:first-child) {
    margin-top: 0;
  }

  .info-card__content :global(p:last-child) {
    margin-bottom: 0;
  }

  .info-card__content :global(ul),
  .info-card__content :global(ol) {
    margin: var(--space-2) 0;
    padding-left: var(--space-6);
  }

  .info-card__content :global(code) {
    font-size: 0.85em;
  }

  /* Type variants */
  .info-card--info {
    background-color: var(--color-info-bg);
    border-left: 3px solid var(--color-info);
  }

  .info-card--info .info-card__icon,
  .info-card--info .info-card__title {
    color: var(--color-info);
  }

  .info-card--warning {
    background-color: var(--color-warning-bg);
    border-left: 3px solid var(--color-warning);
  }

  .info-card--warning .info-card__icon,
  .info-card--warning .info-card__title {
    color: var(--color-warning);
  }

  .info-card--tip {
    background-color: var(--color-success-bg);
    border-left: 3px solid var(--color-success);
  }

  .info-card--tip .info-card__icon,
  .info-card--tip .info-card__title {
    color: var(--color-success);
  }

  .info-card--note {
    background-color: var(--color-surface-alt);
    border-left: 3px solid var(--color-text-muted);
  }

  .info-card--note .info-card__icon,
  .info-card--note .info-card__title {
    color: var(--color-text-muted);
  }

  .info-card--danger {
    background-color: var(--color-error-bg);
    border-left: 3px solid var(--color-error);
  }

  .info-card--danger .info-card__icon,
  .info-card--danger .info-card__title {
    color: var(--color-error);
  }
</style>
